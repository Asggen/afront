"use strict";(self.webpackChunkafront=self.webpackChunkafront||[]).push([[863],{863(e,t,n){n.r(t),n.d(t,{default:()=>d});var r=n(540),a=n(658),u=n(103);function i(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,a,u){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return o(s,"_invoke",function(n,r,a){var u,i,o,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return u=t,i=0,o=e,d.n=n,l}};function m(n,r){for(i=n,o=r,t=0;!f&&c&&!a&&t<s.length;t++){var a,u=s[t],m=d.p,p=u[2];n>3?(a=p===r)&&(o=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=m&&((a=n<2&&m<u[1])?(i=0,d.v=r,d.n=u[1]):m<p&&(a=n<3||u[0]>r||r>p)&&(u[4]=n,u[5]=r,d.n=p,i=0))}if(a||n>1)return l;throw f=!0,r}return function(a,s,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),i=s,o=p;(t=i<2?e:o)||!f;){u||(i?i<3?(i>1&&(d.n=-1),m(i,o)):d.n=o:d.v=o);try{if(c=2,u){if(i||(a="next"),t=u[a]){if(!(t=t.call(u,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=u.return)&&t.call(u),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((t=(f=d.n<0)?o:n.call(r,d))!==l)break}catch(t){u=e,i=1,o=t}finally{c=1}}return{value:t,done:f}}}(n,a,u),!0),s}var l={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),m=f.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,o(m,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(m),o(m,a,"Generator"),o(m,r,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(i=function(){return{w:u,m:p}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function u(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},o(e,t,n,r)}function l(e,t,n,r,a,u,i){try{var o=e[u](i),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function i(e){l(u,r,a,i,o,"next",e)}function o(e){l(u,r,a,i,o,"throw",e)}i(void 0)})}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,u,i,o=[],l=!0,c=!1;try{if(u=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=u.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const d=function(){var e=(0,a.Zp)(),t=s((0,r.useState)(1),2),n=t[0],o=t[1],l=s((0,r.useState)(""),2),f=l[0],d=l[1],m=s((0,r.useState)(""),2),p=m[0],b=m[1],v=s((0,r.useState)(""),2),y=v[0],h=v[1],g=s((0,r.useState)("personal"),2),E=g[0],k=g[1],w=s((0,r.useState)(""),2),S=w[0],C=w[1],N=s((0,r.useState)(!1),2),j=N[0],O=N[1],A=s((0,r.useState)(null),2),T=A[0],P=A[1],q=function(){if(P(null),1===n){if(!f)return"Email is required";if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(f))return"Enter a valid email address";if(!p)return"Password is required";if(p.length<8)return"Password must be at least 8 characters"}if(2===n&&(!y||0===y.trim().length))return"Full name is required";if(3===n){if(!E)return"Select account type";if("business"===E&&(!S||0===S.trim().length))return"Brand / Company Name is required for business accounts"}return null},x=function(e){c(i().m(function t(){var r,a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e&&e.preventDefault(),!(r=q())){t.n=1;break}return t.a(2,P(r));case 1:if(P(null),1!==n){t.n=8;break}return t.p=2,t.n=3,u.Ay.checkSignup({email:f});case 3:if((a=t.v)&&a.ok){t.n=4;break}return P(a&&a.data&&(a.data.error||a.data.message)||"Check failed"),t.a(2);case 4:if(!a.data.disposable){t.n=5;break}return P("Disposable email addresses are not allowed"),t.a(2);case 5:if(!a.data.exists){t.n=6;break}return P("An account already exists with this email"),t.a(2);case 6:t.n=8;break;case 7:return t.p=7,t.v,P("Email check failed"),t.a(2);case 8:o(function(e){return Math.min(3,e+1)});case 9:return t.a(2)}},t,null,[[2,7]])}))()},F=function(e){e&&e.preventDefault(),P(null),o(function(e){return Math.max(1,e-1)})},B=function(){var t=c(i().m(function t(n){var r,a,o;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n&&n.preventDefault(),!(r=q())){t.n=1;break}return t.a(2,P(r));case 1:return O(!0),P(null),t.p=2,a={email:f,password:p,name:y,accountType:E,companyName:"business"===E?S:void 0},t.n=3,u.Ay.signup(a);case 3:if((o=t.v)&&o.ok){t.n=4;break}return P(o&&o.data&&(o.data.error||o.data.message)||"Registration failed"),O(!1),t.a(2);case 4:try{localStorage.setItem("auth-event",String(Date.now()))}catch(e){}window.dispatchEvent(new Event("auth-changed")),e("/"),t.n=6;break;case 5:t.p=5,t.v,P("Registration failed");case 6:return t.p=6,O(!1),t.f(6);case 7:return t.a(2)}},t,null,[[2,5,6,7]])}));return function(e){return t.apply(this,arguments)}}();return r.createElement("div",{className:"page auth-page signup-page"},r.createElement("h2",null,"Sign up"),T&&r.createElement("div",{className:"auth-error"},T),r.createElement("form",{className:"auth-form",onSubmit:3===n?B:x},1===n&&r.createElement(r.Fragment,null,r.createElement("label",null,"Email Address (required)",r.createElement("input",{type:"email",value:f,onChange:function(e){return d(e.target.value)},disabled:j})),r.createElement("label",null,"Password (required, min 8 characters)",r.createElement("input",{type:"password",value:p,onChange:function(e){return b(e.target.value)},disabled:j})),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"button",onClick:x,disabled:j},"Next"))),2===n&&r.createElement(r.Fragment,null,r.createElement("label",null,"Full Name (required)",r.createElement("input",{value:y,onChange:function(e){return h(e.target.value)},disabled:j})),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"button",onClick:F,disabled:j},"Back"),r.createElement("button",{type:"button",onClick:x,disabled:j},"Next"))),3===n&&r.createElement(r.Fragment,null,r.createElement("label",null,"Account Type (required)",r.createElement("div",null,r.createElement("label",null,r.createElement("input",{type:"radio",name:"accountType",value:"personal",checked:"personal"===E,onChange:function(){return k("personal")},disabled:j}),"Personal / Creator"),r.createElement("label",null,r.createElement("input",{type:"radio",name:"accountType",value:"business",checked:"business"===E,onChange:function(){return k("business")},disabled:j}),"Business / Brand / Company"))),"business"===E&&r.createElement("label",null,"Brand / Company Name (required for business)",r.createElement("input",{value:S,onChange:function(e){return C(e.target.value)},disabled:j})),T&&r.createElement("div",{className:"auth-error"},T),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"button",onClick:F,disabled:j},"Back"),r.createElement("button",{type:"submit",disabled:j},j?"Signing up...":"Sign up")))))}}}]);